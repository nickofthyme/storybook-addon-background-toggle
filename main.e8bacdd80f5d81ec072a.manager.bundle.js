(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{399:function(module,exports,__webpack_require__){__webpack_require__(400),__webpack_require__(770),__webpack_require__(771),module.exports=__webpack_require__(769)},467:function(module,exports){},769:function(module,exports,__webpack_require__){"use strict";__webpack_require__(96).addons.setConfig({refs:{}})},771:function(module,__webpack_exports__,__webpack_require__){"use strict";__webpack_require__.r(__webpack_exports__);var _templateObject,_templateObject2,react=__webpack_require__(0),react_default=__webpack_require__.n(react),esm=__webpack_require__(73),types=__webpack_require__(189),ADDON_ID="storybook-addon-background-toggle",TOOL_ID="".concat(ADDON_ID,"/tool"),dist_esm=__webpack_require__(7),lazy_WithTooltip=__webpack_require__(774),bar_button=__webpack_require__(391),icon=__webpack_require__(195),TooltipLinkList=__webpack_require__(776),theming_dist_esm=__webpack_require__(1);function _taggedTemplateLiteral(strings,raw){return raw||(raw=strings.slice(0)),Object.freeze(Object.defineProperties(strings,{raw:{value:Object.freeze(raw)}}))}var Color_Color=function Color(_ref){var background=_ref.background,important=_ref.important;return react_default.a.createElement(Container,null,important&&react_default.a.createElement("div",{title:"!important"},react_default.a.createElement(StyledIcon,{icon:"alert"})),react_default.a.createElement(Background,{background:background}))},Container=theming_dist_esm.styled.div(_templateObject||(_templateObject=_taggedTemplateLiteral(["\n  display: flex;\n"]))),StyledIcon=Object(theming_dist_esm.styled)(icon.a)(_templateObject2||(_templateObject2=_taggedTemplateLiteral(["\n  margin-right: 0.5rem !important;\n  opacity: 1 !important;\n  fill: #FF4C29;\n"]))),Background=theming_dist_esm.styled.div((function(_ref2){return{borderRadius:"1rem",height:"1rem",width:"1rem",position:"relative",background:_ref2.background}}),(function(_ref3){var appBorderColor=_ref3.theme.appBorderColor;return{boxShadow:"".concat(appBorderColor," 0 0 0 1px inset")}})),Tooltip_Tooltip=function Tooltip(_ref){var _backgroundParams$cle,selected=_ref.selected,setBackground=_ref.setBackground,backgroundParams=_ref.backgroundParams,links=backgroundParams.options.map((function(_ref2){var id=_ref2.id,title=_ref2.title,color=_ref2.color,important=_ref2.important;return{id:id,key:id,title:null!=title?title:id,active:selected&&id===selected.id,onClick:function onClick(){return setBackground(id)},right:react_default.a.createElement(Color_Color,{background:color,important:important})}}));return selected&&(null===(_backgroundParams$cle=backgroundParams.clearable)||void 0===_backgroundParams$cle||_backgroundParams$cle)&&links.unshift(Tooltip_getClearLink(setBackground)),react_default.a.createElement(TooltipLinkList.a,{links:links})},Tooltip_getClearLink=function getClearLink(setBackground){var id="__clearable__link___";return{id:id,key:id,loading:!1,title:"Clear selected background",active:!1,onClick:function onClick(){return setBackground()},right:react_default.a.createElement(icon.a,{icon:"cross"})}},core_events_dist_esm=__webpack_require__(9);function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=arr&&("undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"]);if(null==_i)return;var _s,_e,_arr=[],_n=!0,_d=!1;try{for(_i=_i.call(arr);!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{_n||null==_i.return||_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var iconBtnId="sotrybook-addon-background-toggle-icon-btn",Tool_Tool=function Tool(_ref){var _backgroundParams$opt2,_backgroundParams$ico,api=_ref.api,_useState2=_slicedToArray(Object(react.useState)(!1),2),expanded=_useState2[0],setExpanded=_useState2[1],_useGlobals2=_slicedToArray(Object(dist_esm.i)(),2),globals=_useGlobals2[0],updateGlobals=_useGlobals2[1],selectedId=globals.background?String(globals.background):void 0,backgroundParams=Object(dist_esm.j)("background",null),backgroundParamsRef=Object(react.useRef)(backgroundParams);Object(react.useEffect)((function(){backgroundParamsRef.current=backgroundParams}),[backgroundParams]);var getBackground=Object(react.useCallback)((function(backgroundId){var _backgroundParams$opt;return(null!==(_backgroundParams$opt=null==backgroundParams?void 0:backgroundParams.options)&&void 0!==_backgroundParams$opt?_backgroundParams$opt:[]).find((function(_ref2){return _ref2.id===(null!=backgroundId?backgroundId:selectedId)}))}),[backgroundParams,selectedId]),setBackground=Object(react.useCallback)((function(backgroundId){var _backgroundParams$blu,forcedUpdate=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(backgroundId!==selectedId){var _backgroundParams$onC,newBackground=getBackground(null!=backgroundId?backgroundId:"");null==backgroundParams||null===(_backgroundParams$onC=backgroundParams.onChange)||void 0===_backgroundParams$onC||_backgroundParams$onC.call(backgroundParams,newBackground),updateGlobals({background:backgroundId})}if(!forcedUpdate&&(null===(_backgroundParams$blu=null==backgroundParams?void 0:backgroundParams.blurOnSelect)||void 0===_backgroundParams$blu||_backgroundParams$blu)){var _iconBtn$click,iconBtn=document.querySelector("#".concat(iconBtnId));null==iconBtn||null===(_iconBtn$click=iconBtn.click)||void 0===_iconBtn$click||_iconBtn$click.call(iconBtn)}}),[updateGlobals,selectedId,getBackground]);if(Object(react.useEffect)((function(){var setDefaultBackground=function setDefaultBackground(){var _backgroundParamsRef$,_backgroundParamsRef$2,value=null!==(_backgroundParamsRef$=backgroundParamsRef.current)&&void 0!==_backgroundParamsRef$&&_backgroundParamsRef$.persist?selectedId:null===(_backgroundParamsRef$2=backgroundParamsRef.current)||void 0===_backgroundParamsRef$2?void 0:_backgroundParamsRef$2.default;setBackground(value,!0)};return api.on(core_events_dist_esm.CURRENT_STORY_WAS_SET,setDefaultBackground),function(){return api.off(core_events_dist_esm.CURRENT_STORY_WAS_SET,setDefaultBackground)}}),[backgroundParamsRef,selectedId]),Object(react.useEffect)((function(){var setInitialBackground=function setInitialBackground(){if(backgroundParamsRef.current&&!selectedId){var _getBackgroundFromUrl,_backgroundParamsRef$3,backgroundId=null!==(_getBackgroundFromUrl=function getBackgroundFromUrl(_ref3){var _URL$searchParams$get,_re$exec,options=_ref3.options,ignoreQueryParams=_ref3.ignoreQueryParams;if(null==ignoreQueryParams||ignoreQueryParams)return null;var re=/background:([^;]*)/,globals=null!==(_URL$searchParams$get=new URL(window.location.toString()).searchParams.get("globals"))&&void 0!==_URL$searchParams$get?_URL$searchParams$get:"",backgroundId=_slicedToArray(null!==(_re$exec=re.exec(globals))&&void 0!==_re$exec?_re$exec:[],2)[1];return options.find((function(_ref6){return _ref6.id===backgroundId}))?backgroundId:re.test(globals)?"":null}(backgroundParamsRef.current))&&void 0!==_getBackgroundFromUrl?_getBackgroundFromUrl:null===(_backgroundParamsRef$3=backgroundParamsRef.current)||void 0===_backgroundParamsRef$3?void 0:_backgroundParamsRef$3.default;updateGlobals({background:backgroundId})}};return api.on(core_events_dist_esm.SET_STORIES,setInitialBackground),function(){return api.off(core_events_dist_esm.SET_STORIES,setInitialBackground)}}),[]),!backgroundParams||backgroundParams.disable||0===(null===(_backgroundParams$opt2=backgroundParams.options)||void 0===_backgroundParams$opt2?void 0:_backgroundParams$opt2.length))return null;var background=getBackground();return react_default.a.createElement(lazy_WithTooltip.a,{placement:"top",trigger:"click",startOpen:!1,tooltipShown:expanded,onVisibilityChange:setExpanded,tooltip:react_default.a.createElement(Tooltip_Tooltip,{selected:background,backgroundParams:backgroundParams,setBackground:setBackground})},react_default.a.createElement(bar_button.a,{id:iconBtnId,key:TOOL_ID,active:Boolean(background),title:"Select background",onClick:function onClick(){return setExpanded(!0)}},react_default.a.createElement(icon.a,{icon:null!==(_backgroundParams$ico=backgroundParams.icon)&&void 0!==_backgroundParams$ico?_backgroundParams$ico:"mirror"})))};esm.c.register(ADDON_ID,(function(api){esm.c.add(TOOL_ID,{type:types.b.TOOL,title:"Background toggle",match:function match(_ref){return"story"===_ref.viewMode},render:function render(){return react_default.a.createElement(Tool_Tool,{api:api})}})}))}},[[399,2,3]]]);